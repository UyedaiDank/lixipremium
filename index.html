<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Qu·∫£n L√Ω L√¨ X√¨ - Tu·∫•n H√πng</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: sans-serif; background: #f4f4f4; padding: 20px; text-align: center; }
        .card { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); max-width: 500px; margin: auto; }
        select, input, button { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid #ddd; box-sizing: border-box; }
        button { background: #ce1f1f; color: white; font-weight: bold; border: none; cursor: pointer; transition: 0.3s; }
        button:hover { background: #a01818; }
        .status { margin-top: 15px; font-size: 0.9rem; color: #666; }
        .random-info { font-size: 0.8rem; color: #ce1f1f; font-style: italic; }
    </style>
</head>
<body>

    <div class="card">
        <h2>üßß C√ÄI ƒê·∫∂T KHO L√å X√å</h2>
        <p class="random-info">* S·ªë l∆∞·ª£ng s·∫Ω ƒë∆∞·ª£c Random khi g·ª≠i kho qu√†</p>
        
        <select id="platform">
            <option value="TikTok">TikTok</option>
            <option value="Facebook">Facebook</option>
            <option value="Instagram">Instagram</option>
            <option value="CapCut">CapCut</option>
        </select>

        <select id="service">
            <option value="Follow">Follow (Random 100-300)</option>
            <option value="Like">Like (Random 200-400)</option>
            <option value="View">View (Random 100-1000)</option>
            <option value="ACC Premium">T√†i kho·∫£n Premium (D√†nh cho CapCut)</option>
        </select>

        <input type="number" id="quantity" placeholder="S·ªë l∆∞·ª£ng bao l√¨ x√¨ mu·ªën t·∫°o" value="10">
        
        <button onclick="generateLixi()">üì§ G·ª¨I KHO QU√Ä L√äN H·ªÜ TH·ªêNG</button>
        
        <div class="status" id="status">S·∫µn s√†ng t·∫°o qu√†...</div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAi-aFwXlI_BtKcbVyV9poRrWkuzfBMCk8",
            authDomain: "quanlilixiacc.firebaseapp.com",
            projectId: "quanlilixiacc",
            storageBucket: "quanlilixiacc.firebasestorage.app",
            messagingSenderId: "351169563993",
            appId: "1:351169563993:web:f7d4df9c18df7f302e9048",
            databaseURL: "https://quanlilixiacc-default-rtdb.asia-southeast1.firebasedatabase.app"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // H√†m l·∫•y s·ªë ng·∫´u nhi√™n trong kho·∫£ng
        function getRandom(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        window.generateLixi = async () => {
            const platform = document.getElementById('platform').value;
            const serviceType = document.getElementById('service').value;
            const qty = parseInt(document.getElementById('quantity').value);
            const statusDiv = document.getElementById('status');

            if (!qty || qty <= 0) return alert("Nh·∫≠p s·ªë l∆∞·ª£ng bao!");

            statusDiv.innerText = "Ê≠£Âú® G·ª≠i d·ªØ li·ªáu...";
            const lixiList = [];

            for (let i = 0; i < qty; i++) {
                let amount = 0;
                let finalService = serviceType;

                // X·ª≠ l√Ω Logic Random s·ªë l∆∞·ª£ng
                if (serviceType === "Follow") {
                    amount = getRandom(100, 300);
                } else if (serviceType === "Like") {
                    amount = getRandom(200, 400);
                } else if (serviceType === "View") {
                    amount = getRandom(100, 1000);
                } else {
                    amount = "1"; // Cho ACC Premium
                }

                lixiList.push({
                    platform: platform,
                    service: finalService,
                    amount: amount,
                    category: serviceType === "ACC Premium" ? "ACC" : "SERVICE",
                    status: "available"
                });
            }

            try {
                // Ghi ƒë√® kho qu√† m·ªõi l√™n Firebase
                await set(ref(db, 'lixi_services'), lixiList);
                statusDiv.innerText = `‚úÖ ƒê√£ t·∫°o th√†nh c√¥ng ${qty} bao l√¨ x√¨ ${platform}!`;
                alert("ƒê√£ c·∫≠p nh·∫≠t kho qu√† th√†nh c√¥ng!");
            } catch (error) {
                console.error(error);
                statusDiv.innerText = "‚ùå L·ªói khi g·ª≠i d·ªØ li·ªáu!";
            }
        };
    </script>
</body>
</html>
